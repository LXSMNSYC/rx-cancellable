var Disposable=function(){"use strict";const e=(e,t)=>e.events[t].forEach(t=>t.apply(e)),t={disposed:!0},s={disposed:!1},i={active:!0},n={active:!1},r=new WeakMap,h=new WeakMap,d=new WeakMap;let o;class a{constructor(){r.set(this,s),h.set(this,i),this.events={enable:[],disable:[],dispose:[]},this.children=[]}static create(){null==o&&(o=new a);const e=new a;return r.set(e,o),h.set(e,o),d.set(e,o),e}get disposed(){return r.get(this).disposed}get active(){return h.get(this).active}enable(){return!this.disposed&&!this.active&&(h.set(this,d.get(this)),e(this,"enable"),!0)}disable(){return!(this.disposed||!this.active)&&(h.set(this,n),e(this,"disable"),!0)}isParentTo(e){const t=d.get(e);return null!=t&&(t===this||t!==o&&this.isParentTo(t))}setParent(e){if(e!==this&&!this.isParentTo(e)&&e instanceof a){if(!e.disposed)return d.set(this,e),e.children.push(this),!0;this.dispose()}return!1}removeParent(e){return e.remove(this)}add(e){return e.setParent(this)}remove(e){return!this.disposed&&d.get(e)===this&&(this.children=this.children.filter(t=>t!==e),d.set(e,o),!0)}dispose(){return!this.disposed&&(e(this,"dispose"),this.children.forEach(e=>e.dispose()),r.set(this,t),!0)}addEventListener(e,t){if("function"!=typeof t)return;const{events:s}=this;this.disposed||e in s&&s[e].push(t)}removeEventListener(e,t){if("function"!=typeof t)return;const{events:s}=this;if(!this.disposed&&e in s){const i=s[e].indexOf(t);-1!==i&&s[e].splice(i,1)}}}return a}();